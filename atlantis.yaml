# # atlantis.yaml
# version: 3
# automerge: true
# delete_source_branch_on_merge: true
# parallel_plan: true
# parallel_apply: true
# projects:
# - name: ec2
#   dir: ./ec2
#   workspace: default
#   apply_requirements: [mergeable, approved]
#   workflow: myworkflow
# workflows:
#   myworkflow:
#     plan:
#       steps:
#       - run: echo "In Terraform Init and Plan"
#       - init
#       - plan:
#           extra_args: ["-lock=false"]
#     apply:
#       steps:
#       - run: echo "In Terraform Apply"
#       - apply

version: 3
projects:
- name: ec2
  dir: ./atlantis_instance
  workspace: default
  apply_requirements: [mergeable, approved]
  workflow: myworkflow
workflows:
  myworkflow:
    plan:
      steps:
      - run: echo "In Terraform Init and Plan"
      - init
      - plan:
          extra_args: ["-lock=false"]
    apply:
      steps:
      - run: echo "In Terraform Apply"
      - apply